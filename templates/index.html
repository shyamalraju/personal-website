{% extends "base.html" %}

{% block content %}
<div class="py-12">
    <!-- Hero Section -->
    <div class="text-center">
        <!-- Profile Picture -->
        <div class="mb-4 sm:mb-6 relative">
            <img 
                src="{{ url_for('static', filename='images/photo.jpg') }}?t={{ range(1000000) | random }}" 
                alt="Shyamal Raju"
                class="w-32 h-32 sm:w-48 sm:h-48 rounded-full mx-auto shadow-xl border-4 border-gray-600"
            >
            {% if session.get('is_admin') == True %}
            <a href="{{ url_for('upload_profile') }}" 
               class="absolute bottom-0 right-1/2 transform translate-x-16 translate-y-2 bg-gray-800 p-2 rounded-full shadow-lg hover:bg-gray-700"
               title="Update Profile Picture">
                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                </svg>
            </a>
            {% endif %}
        </div>
        <h1 class="text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-2 sm:mb-4">Hi, I'm Shyamal Raju</h1>
        <p class="text-lg sm:text-xl text-gray-300">Software Developer & Technology Enthusiast</p>
    </div>

    <!-- Skills Section -->
    <div class="mt-8 sm:mt-16">
        <h2 class="text-2xl sm:text-3xl font-bold text-white mb-4 sm:mb-6">Skills Distribution</h2>
        <div class="bg-gray-800 rounded-lg shadow-md p-6">
            <div id="pieChart" class="w-full h-[400px]"></div>
            
            <!-- Tech Stack Icons -->
            <div class="flex flex-wrap justify-center items-center gap-4 sm:gap-8 md:gap-16 mt-4 sm:mt-8 pt-4 sm:pt-8 border-t border-gray-700">
                <!-- Python Icon -->
                <div class="flex flex-col items-center justify-center transition-all duration-200 ease-in-out opacity-50">
                    <img src="https://s3.dualstack.us-east-2.amazonaws.com/pythondotorg-assets/media/community/logos/python-logo-only.png" 
                         alt="Python" 
                         class="h-12 w-auto brightness-110">
                    <span class="text-gray-300 mt-3">Python</span>
                </div>
                
                <!-- JavaScript/TypeScript Icon -->
                <div class="flex flex-col items-center justify-center transition-all duration-200 ease-in-out opacity-50">
                    <div class="flex gap-2">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6a/JavaScript-logo.png"
                             alt="JavaScript"
                             class="h-12 w-auto">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/4/4c/Typescript_logo_2020.svg"
                             alt="TypeScript"
                             class="h-12 w-auto">
                    </div>
                    <span class="text-gray-300 mt-3">JavaScript/TypeScript</span>
                </div>
                
                <!-- HTML5 Icon -->
                <div class="flex flex-col items-center justify-center transition-all duration-200 ease-in-out opacity-50">
                    <img src="https://www.w3.org/html/logo/badge/html5-badge-h-solo.png"
                         alt="HTML5"
                         class="h-12 w-auto">
                    <span class="text-gray-300 mt-3">HTML</span>
                </div>
                
                <!-- CSS3 Icon -->
                <div class="flex flex-col items-center justify-center transition-all duration-200 ease-in-out opacity-50">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/6/62/CSS3_logo.svg"
                         alt="CSS3"
                         class="h-12 w-auto">
                    <span class="text-gray-300 mt-3">CSS</span>
                </div>
                
                <!-- SQL Icon Option 3 -->
                <div class="flex flex-col items-center justify-center transition-all duration-200 ease-in-out opacity-50">
                    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/sqlite/sqlite-original.svg"
                         alt="SQL"
                         class="h-12 w-auto object-contain brightness-125">
                    <span class="text-gray-300 mt-3">SQL</span>
                </div>
            </div>
        </div>
    </div>

    <!-- About Section -->
    <div id="about" class="mt-16">
        <h2 class="text-3xl font-bold text-white mb-6">About Me</h2>
        <div class="bg-gray-800 rounded-lg shadow-md p-6 space-y-6">
            <p class="text-gray-300 leading-relaxed">
                I'm a software developer with a passion for building elegant solutions to complex problems. My journey in tech began with Python scripting, which quickly evolved into a deep fascination with web development, data visualization, and cloud architecture.
            </p>
            
            <p class="text-gray-300 leading-relaxed">
                Currently, I specialize in full-stack development, with expertise in Python backends (Flask, Django) and modern frontend frameworks (React, Vue.js). I'm particularly interested in data visualization and creating intuitive user interfaces that make complex data accessible and meaningful.
            </p>

            <p class="text-gray-300 leading-relaxed">
                When I'm not coding, you'll find me exploring new technologies, contributing to open-source projects, or writing technical articles about my discoveries. I believe in continuous learning and sharing knowledge with the developer community.
            </p>

            <div class="border-t border-gray-700 pt-6">
                <h3 class="text-xl font-bold text-white mb-4">Current Focus</h3>
                <ul class="list-disc list-inside text-gray-300 space-y-2">
                    <li>Building scalable web applications with Python and TypeScript</li>
                    <li>Exploring data visualization techniques with D3.js and Plotly</li>
                    <li>Contributing to open-source projects in the Python ecosystem</li>
                    <li>Writing technical articles about web development and data visualization</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Projects Section -->
    <div id="projects" class="mt-16">
        <h2 class="text-3xl font-bold text-white mb-6">My Projects</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Project Card 1 -->
            <div class="bg-gray-800 rounded-lg shadow-md overflow-hidden">
                <div class="p-6">
                    <h3 class="text-xl font-bold text-white mb-2">Project 1</h3>
                    <p class="text-gray-300">Description of your first project</p>
                </div>
            </div>
            <!-- Add more project cards as needed -->
        </div>
    </div>

    <!-- Contact Section -->
    <div id="contact" class="mt-16">
        <h2 class="text-3xl font-bold text-white mb-6">Contact Me</h2>
        <div class="bg-gray-800 rounded-lg shadow-md p-6">
            <div class="flex flex-col space-y-6">
                <!-- Email Button -->
                <p class="text-gray-300">
                    <button onclick="openEmailModal()" class="text-blue-400 hover:text-blue-300 hover:underline">
                        Click here to send me a message
                    </button>
                </p>

                <!-- Social Links -->
                <div class="flex items-center justify-center sm:justify-start space-x-4 sm:space-x-6">
                    <!-- GitHub -->
                    <a href="https://github.com/shyamalraju" target="_blank" rel="noopener noreferrer" 
                       class="text-gray-300 hover:text-white transition-colors">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
                        </svg>
                    </a>

                    <!-- Twitter/X -->
                    <a href="https://twitter.com/shyamal_tweets" target="_blank" rel="noopener noreferrer" 
                       class="text-gray-300 hover:text-white transition-colors">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                        </svg>
                    </a>

                    <!-- LinkedIn -->
                    <a href="https://linkedin.com/in/shyamalraju" target="_blank" rel="noopener noreferrer"
                       class="text-gray-300 hover:text-white transition-colors">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                        </svg>
                    </a>

                    <!-- Medium -->
                    <a href="https://medium.com/@shyamalraju" target="_blank" rel="noopener noreferrer"
                       class="text-gray-300 hover:text-white transition-colors">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M13.54 12a6.8 6.8 0 01-6.77 6.82A6.8 6.8 0 010 12a6.8 6.8 0 016.77-6.82A6.8 6.8 0 0113.54 12zM20.96 12c0 3.54-1.51 6.42-3.38 6.42-1.87 0-3.39-2.88-3.39-6.42s1.52-6.42 3.39-6.42 3.38 2.88 3.38 6.42M24 12c0 3.17-.53 5.75-1.19 5.75-.66 0-1.19-2.58-1.19-5.75s.53-5.75 1.19-5.75C23.47 6.25 24 8.83 24 12z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Email Modal -->
    <div id="emailModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center">
        <div class="bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-white">Send Me a Message</h3>
                <button onclick="closeEmailModal()" class="text-gray-400 hover:text-white">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <form id="emailForm" class="space-y-4">
                <div>
                    <label for="name" class="block text-gray-300 mb-2">Your Name</label>
                    <input type="text" id="name" class="w-full bg-gray-700 text-white rounded p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label for="email" class="block text-gray-300 mb-2">Your Email</label>
                    <input type="email" id="email" class="w-full bg-gray-700 text-white rounded p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label for="message" class="block text-gray-300 mb-2">Message</label>
                    <textarea id="message" rows="4" class="w-full bg-gray-700 text-white rounded p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors">
                    Send Message
                </button>
            </form>
        </div>
    </div>
</div>

<!-- Add this at the bottom of your content block -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script>
    const graphs = JSON.parse('{{ pie_chart | safe }}');
    const plot = Plotly.newPlot('pieChart', graphs.data, graphs.layout);

    // Add hover interactions
    const pieChart = document.getElementById('pieChart');
    const techIcons = {
        'Python': document.querySelector('[alt="Python"]').parentElement,
        'JavaScript/TypeScript': document.querySelector('[alt="JavaScript"]').parentElement.parentElement,
        'HTML': document.querySelector('[alt="HTML5"]').parentElement,
        'CSS': document.querySelector('[alt="CSS3"]').parentElement,
        'SQL': document.querySelector('[alt="SQL"]').parentElement
    };

    pieChart.on('plotly_hover', (data) => {
        const label = data.points[0].label;
        const icon = techIcons[label];
        
        // Reset all icons to default dulled state
        Object.values(techIcons).forEach(icon => {
            icon.classList.remove('scale-110', 'brightness-125');
            // No need to add opacity-50 as it's now the default
        });
        
        // Highlight hovered icon
        if (icon) {
            icon.classList.remove('opacity-50');  // Remove the dull state
            icon.classList.add('scale-110', 'brightness-125');
        }
    });

    pieChart.on('plotly_unhover', () => {
        // Reset all icons to default dulled state
        Object.values(techIcons).forEach(icon => {
            icon.classList.remove('scale-110', 'brightness-125');
            icon.classList.add('opacity-50');
        });
    });

    const emailModal = document.getElementById('emailModal');

    function openEmailModal() {
        emailModal.classList.remove('hidden');
        emailModal.classList.add('flex');
    }

    function closeEmailModal() {
        emailModal.classList.add('hidden');
        emailModal.classList.remove('flex');
    }

    document.getElementById('emailForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;
        const message = document.getElementById('message').value;
        
        // Create mailto URL with form data
        const subject = `Message from ${name} via Portfolio`;
        const body = `From: ${name}\nEmail: ${email}\n\nMessage:\n${message}`;
        const mailtoUrl = `mailto:your.email@example.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        
        // Open email client
        window.location.href = mailtoUrl;
        
        // Close modal
        closeEmailModal();
    });

    // Close modal when clicking outside
    emailModal.addEventListener('click', function(e) {
        if (e.target === emailModal) {
            closeEmailModal();
        }
    });
</script>
{% endblock %} 